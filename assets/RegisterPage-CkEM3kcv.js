import{r as m,j as e,L as N}from"./index-DER6MHZ3.js";import{r as j}from"./api-DEwFvyrQ.js";const w=l=>{const[s,n]=m.useState({email:"",password:"",dni:"",name:"",lastName:"",phoneNumber:"",country:"",photoUrl:"",birthDate:"",licenseNumber:"",specialty:""}),[a,u]=m.useState(""),[r,d]=m.useState({}),[h,x]=m.useState(!1),[g,p]=m.useState(null),y=()=>{const t={};if(s.name.trim()||(t.name="El nombre es requerido"),s.lastName.trim()||(t.lastName="El apellido es requerido"),s.dni.trim()||(t.dni="El DNI es requerido"),s.email?/\S+@\S+\.\S+/.test(s.email)||(t.email="Email inválido"):t.email="El email es requerido",s.password?s.password.length<6&&(t.password="Debe tener ≥ 6 caracteres"):t.password="La contraseña es requerida",s.password!==a&&(t.confirmPassword="Las contraseñas no coinciden"),s.phoneNumber.trim()||(t.phoneNumber="El teléfono es requerido"),s.country.trim()||(t.country="El país es requerido"),!s.birthDate.trim())t.birthDate="La fecha de nacimiento es requerida";else{const o=new Date(s.birthDate);new Date().getFullYear()-o.getFullYear()<18&&(t.birthDate="Debes tener al menos 18 años")}return s.licenseNumber.trim()||(t.licenseNumber="El número de licencia es requerido"),s.specialty.trim()||(t.specialty="La especialidad es requerida"),s.photoUrl&&!/^https?:\/\/.+\..+/.test(s.photoUrl)&&(t.photoUrl="URL inválida"),d(t),Object.keys(t).length===0};return{form:s,confirmPassword:a,handleChange:t=>{const{name:o,value:i}=t.target;o==="confirmPassword"?u(i):n(c=>({...c,[o]:i}))},handleSubmit:async t=>{var o,i;if(t.preventDefault(),p(null),!!y()){x(!0);try{await j(s),p("Usuario creado correctamente"),l==null||l(s),n({email:"",password:"",dni:"",name:"",lastName:"",phoneNumber:"",country:"",photoUrl:"",birthDate:"",licenseNumber:"",specialty:""}),u("")}catch(c){const f=((i=(o=c==null?void 0:c.response)==null?void 0:o.data)==null?void 0:i.message)||"Ocurrió un error inesperado";f.includes("email")?d(b=>({...b,email:"El email ya está registrado"})):d(b=>({...b,email:f}))}finally{x(!1)}}},errors:r,isLoading:h,successMessage:g}},v=({onSubmit:l})=>{const{form:s,confirmPassword:n,handleChange:a,handleSubmit:u,errors:r,isLoading:d,successMessage:h}=w(l);return e.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Crear una cuenta"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["¿Ya tienes una cuenta?"," ",e.jsx(N,{to:"/auth/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Inicia sesión"})]})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[e.jsxs("div",{className:"space-y-4 rounded-md",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre"}),e.jsx("input",{id:"name",name:"name",type:"text",value:s.name,onChange:a,className:`mt-1 block w-full px-3 py-2 border ${r.name?"border-red-500":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Juan",required:!0}),r.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Apellido"}),e.jsx("input",{id:"lastName",name:"lastName",type:"text",value:s.lastName,onChange:a,className:`mt-1 block w-full px-3 py-2 border ${r.lastName?"border-red-500":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Pérez",required:!0}),r.lastName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dni",className:"block text-sm font-medium text-gray-700",children:"DNI"}),e.jsx("input",{id:"dni",name:"dni",type:"text",value:s.dni,onChange:a,className:`mt-1 block w-full px-3 py-2 border ${r.dni?"border-red-500":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"12345678A",required:!0}),r.dni&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.dni})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Correo electrónico"}),e.jsx("input",{id:"email",name:"email",type:"email",value:s.email,onChange:a,className:`mt-1 block w-full px-3 py-2 border ${r.email?"border-red-500":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"correo@ejemplo.com",required:!0}),r.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),e.jsx("input",{id:"password",name:"password",type:"password",value:s.password,onChange:a,className:`mt-1 block w-full px-3 py-2 border ${r.password?"border-red-500":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"********",required:!0}),r.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmar contraseña"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:n,onChange:a,className:`mt-1 block w-full px-3 py-2 border ${r.confirmPassword?"border-red-500":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"********",required:!0}),r.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.confirmPassword})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700",children:"Teléfono"}),e.jsx("input",{id:"phoneNumber",name:"phoneNumber",type:"text",value:s.phoneNumber,onChange:a,className:`mt-1 block w-full px-3 py-2 border ${r.phoneNumber?"border-red-500":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"123456789",required:!0}),r.phoneNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.phoneNumber})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700",children:"País"}),e.jsx("input",{id:"country",name:"country",type:"text",value:s.country,onChange:a,className:`mt-1 block w-full px-3 py-2 border ${r.country?"border-red-500":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"España",required:!0}),r.country&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.country})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"photoUrl",className:"block text-sm font-medium text-gray-700",children:"URL de la foto"}),e.jsx("input",{id:"photoUrl",name:"photoUrl",type:"text",value:s.photoUrl,onChange:a,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"https://...jpg"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"birthDate",className:"block text-sm font-medium text-gray-700",children:"Fecha de nacimiento"}),e.jsx("input",{id:"birthDate",name:"birthDate",type:"date",value:s.birthDate,onChange:a,className:`mt-1 block w-full px-3 py-2 border ${r.birthDate?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,required:!0}),r.birthDate&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.birthDate})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"licenseNumber",className:"block text-sm font-medium text-gray-700",children:"Número de licencia"}),e.jsx("input",{id:"licenseNumber",name:"licenseNumber",type:"text",value:s.licenseNumber,onChange:a,className:`mt-1 block w-full px-3 py-2 border ${r.licenseNumber?"border-red-500":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"ABC123456",required:!0}),r.licenseNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.licenseNumber})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"specialty",className:"block text-sm font-medium text-gray-700",children:"Especialidad"}),e.jsx("input",{id:"specialty",name:"specialty",type:"text",value:s.specialty,onChange:a,className:`mt-1 block w-full px-3 py-2 border ${r.specialty?"border-red-500":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Medicina",required:!0}),r.specialty&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.specialty})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"terms",name:"terms",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",required:!0}),e.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["Acepto los"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-500",children:"términos y condiciones"})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300",children:d?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Procesando..."]}):"Registrarse"}),h&&e.jsx("p",{className:"mt-4 text-sm text-green-600 text-center",children:h}),r.email&&e.jsx("p",{className:"mt-4 text-sm text-red-600 text-center",children:r.email})]})]})};function F(){const l=(s,n,a)=>{console.log("Registro con:",s,n,a)};return e.jsx("section",{className:"flex justify-center py-4",children:e.jsx(v,{onSubmit:l})})}export{F as default};
